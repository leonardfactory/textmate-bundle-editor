var twig = require('twig');

module.exports = Lister = function(folder)
{
	var self = {};
	self.templates = {};
	
	self.build = function () 
	{
		self.folder = folder;
		
		self.templates.list = twig({
		    id: "lists",
		    href: "templates/list.twig",
		    // for this example we'll block until the template is loaded
		    async: false
		});
	}
	
	
	self.buildList = function()
	{
		var rendered_folder = [];
		self.folder.forEach(function(folder_item)
		{
			if(typeof(folder_item) === "array") {
				rendered_folder.push({
					ext		: ['folder', ''],
					name 	: 'Directory'
				});
			}
			else {
				rendered_folder.push(folder_item);
			}
		});
		
		return self.templates.list.render({ posts: rendered_folder });
	}
	
	return self;
}